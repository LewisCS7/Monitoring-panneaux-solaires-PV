<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Auth Projet_Mémoire</title>
        <!-- Inclure Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        
        <!--<style>
            body {
                background-image: url('bg1.jpg');
                background-size: cover;
                background-repeat: no-repeat;
                background-attachment: fixed; /* Pour éviter le défilement de l'image */
            }
        </style>-->
    </head>
    <body class="bg-gray-200">
        <main class="main-content mt-0">
            <div class="page-header align-items-start min-vh-100" style="background-image: url('https://images.unsplash.com/photo-1497294815431-9365093b7331?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1950&q=80');"> 
                <span class="mask bg-dark opacity-6"></span>

                <div class="container my-auto">
                    <br>
                    <div class="row-header p-2 pl-3 pr-3 bg-gray blur border border-white text-white d-flex align-items-center justify-content-between">
                        <h3 class="h3 flex-grow-1 text-center">BIENVENUE AU PORTAIL DE MONITORING PANNEAUX SOLAIRES</h3>
                    </div>
                    
                    <br><br><br>

                    <div class="row">
                        <div class="col-lg-4 col-md-6 col-8 mx-auto">
                            <div class="card z-index-0 fadeIn3 fadeInBottom">
                                <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2">
                                    <div class="bg-primary shadow-primary border-radius-lg py-3 pe-1">
                                        <h4 class="text-white font-weight-bolder text-center mt-2 mb-0">CONNEXION</h4>
                                    </div>
                                </div>
                                
                                <div class="card-body">
                                    <form id="loginForm">
                                        <div class="form-group">
                                            <label for="username">Nom d'utilisateur :</label>
                                            <input type="text" id="username" name="username" class="form-control" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="password">Mot de passe :</label>
                                            <input type="password" id="password" name="password" class="form-control" required>
                                        </div>
                                        <!--
                                        <div class="form-check form-switch d-flex align-items-center mb-3">
                                            <input class="form-check-input" type="checkbox" id="rememberMe" checked>
                                            <label class="form-check-label mb-0 ms-3" for="rememberMe">Remember me</label>
                                        </div>
                                        -->
                                        <button type="submit" class="btn btn-primary btn-block">Se connecter</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <script type="text/javascript">
            document.getElementById("loginForm").addEventListener("submit", function(event) {
                event.preventDefault();
                
                var username = document.getElementById("username").value;
                var password = document.getElementById("password").value;
                
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4) {
                        if (this.status == 200) {
                            // Authentification réussie, rediriger vers la page principale
                            window.location.replace("/");
                        } else {
                            alert("Identifiants incorrects. Veuillez réessayer.");
                        }
                    }
                };
                xhttp.open("POST", "/login", true);
                xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                xhttp.send("username=" + encodeURIComponent(username) + "&password=" + encodeURIComponent(password));
            });
        </script>

        <!-- Inclure Bootstrap JavaScript (si nécessaire) -->
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    </body>
</html>
